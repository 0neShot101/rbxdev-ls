{
  "name": "rbxdev-ls",
  "displayName": "Roblox Luau Language Server",
  "description": "Full Roblox/Luau language support with type checking, completions, and Sunc API support",
  "version": "0.1.9",
  "publisher": "rbxdev",
  "license": "MIT",
  "repository": {
    "type": "git",
    "url": "https://github.com/0neShot101/rbxdev-ls"
  },
  "homepage": "https://github.com/0neShot101/rbxdev-ls#readme",
  "bugs": {
    "url": "https://github.com/0neShot101/rbxdev-ls/issues"
  },
  "icon": "icon.png",
  "engines": {
    "vscode": "^1.75.0"
  },
  "categories": [
    "Programming Languages",
    "Linters"
  ],
  "keywords": [
    "roblox",
    "luau",
    "lua",
    "sunc",
    "language-server",
    "mcp",
    "copilot",
    "ai"
  ],
  "activationEvents": [
    "*"
  ],
  "main": "./out/extension.js",
  "contributes": {
    "languageModelTools": [
      {
        "name": "rbxdev_get_bridge_status",
        "toolReferenceName": "roblox-status",
        "displayName": "Get Roblox Bridge Status",
        "description": "Get the current status of the Roblox executor bridge connection. Returns whether the bridge is running, connected, and the executor name if connected.",
        "modelDescription": "Get the current connection status of the Roblox executor bridge. Use this to check if you can interact with the game.",
        "canBeReferencedInPrompt": true,
        "inputSchema": {
          "type": "object",
          "properties": {}
        }
      },
      {
        "name": "rbxdev_execute_code",
        "toolReferenceName": "roblox-execute",
        "displayName": "Execute Luau Code",
        "description": "Execute Luau code in the connected Roblox game. The code runs in the executor environment with access to the full Roblox API.",
        "modelDescription": "Execute Luau/Lua code in the connected Roblox game. Returns the result or error from execution. Use this to run scripts, query game state, or modify the game.",
        "canBeReferencedInPrompt": true,
        "inputSchema": {
          "type": "object",
          "properties": {
            "code": {
              "type": "string",
              "description": "The Luau code to execute in the game"
            }
          },
          "required": ["code"]
        }
      },
      {
        "name": "rbxdev_get_game_tree",
        "toolReferenceName": "roblox-tree",
        "displayName": "Get Roblox Game Tree",
        "description": "Get the current game hierarchy tree from the connected Roblox game. Returns the structure of services and their children.",
        "modelDescription": "Get the game hierarchy/structure from the connected Roblox game. Returns services like Workspace, Players, ReplicatedStorage and their children. Use path parameter to get a subtree.",
        "canBeReferencedInPrompt": true,
        "inputSchema": {
          "type": "object",
          "properties": {
            "path": {
              "type": "array",
              "items": { "type": "string" },
              "description": "Optional path to a specific node (e.g., [\"Workspace\", \"Folder\"]). If omitted, returns all services."
            },
            "format": {
              "type": "string",
              "enum": ["tree", "json"],
              "description": "Output format: 'tree' for human-readable, 'json' for structured data. Defaults to 'tree'."
            }
          }
        }
      },
      {
        "name": "rbxdev_get_properties",
        "toolReferenceName": "roblox-props",
        "displayName": "Get Instance Properties",
        "description": "Get property values from an instance in the Roblox game.",
        "modelDescription": "Get property values from a Roblox instance. Specify the path to the instance (e.g., [\"Workspace\", \"Part\"]) and optionally which specific properties to retrieve.",
        "canBeReferencedInPrompt": true,
        "inputSchema": {
          "type": "object",
          "properties": {
            "path": {
              "type": "array",
              "items": { "type": "string" },
              "description": "Path to the instance (e.g., [\"Workspace\", \"Part\"])"
            },
            "properties": {
              "type": "array",
              "items": { "type": "string" },
              "description": "Optional list of specific property names to fetch"
            }
          },
          "required": ["path"]
        }
      },
      {
        "name": "rbxdev_set_property",
        "toolReferenceName": "roblox-set-prop",
        "displayName": "Set Instance Property",
        "description": "Set a property value on an instance in the Roblox game.",
        "modelDescription": "Set a property value on a Roblox instance. Supports various types including string, number, boolean, Vector3, Color3, CFrame, UDim2.",
        "canBeReferencedInPrompt": true,
        "inputSchema": {
          "type": "object",
          "properties": {
            "path": {
              "type": "array",
              "items": { "type": "string" },
              "description": "Path to the instance (e.g., [\"Workspace\", \"Part\"])"
            },
            "property": {
              "type": "string",
              "description": "Name of the property to set"
            },
            "value": {
              "type": "string",
              "description": "The value to set (as string, e.g., '100', 'true', '1, 2, 3' for Vector3)"
            },
            "valueType": {
              "type": "string",
              "description": "The type of the value (string, number, boolean, Vector3, Color3, CFrame, UDim2)"
            }
          },
          "required": ["path", "property", "value", "valueType"]
        }
      },
      {
        "name": "rbxdev_teleport_player",
        "toolReferenceName": "roblox-teleport",
        "displayName": "Teleport Player",
        "description": "Teleport the local player to an instance's position in the Roblox game.",
        "modelDescription": "Teleport the local player to a specific instance's position. The instance must have a Position or CFrame property.",
        "canBeReferencedInPrompt": true,
        "inputSchema": {
          "type": "object",
          "properties": {
            "path": {
              "type": "array",
              "items": { "type": "string" },
              "description": "Path to the target instance (e.g., [\"Workspace\", \"SpawnLocation\"])"
            }
          },
          "required": ["path"]
        }
      },
      {
        "name": "rbxdev_delete_instance",
        "toolReferenceName": "roblox-delete",
        "displayName": "Delete Instance",
        "description": "Delete an instance from the Roblox game. This is permanent and cannot be undone.",
        "modelDescription": "Delete an instance from the Roblox game. Use with caution as this cannot be undone.",
        "canBeReferencedInPrompt": true,
        "inputSchema": {
          "type": "object",
          "properties": {
            "path": {
              "type": "array",
              "items": { "type": "string" },
              "description": "Path to the instance to delete (e.g., [\"Workspace\", \"Part\"])"
            }
          },
          "required": ["path"]
        }
      },
      {
        "name": "rbxdev_reparent_instance",
        "toolReferenceName": "roblox-reparent",
        "displayName": "Reparent Instance",
        "description": "Move an instance to a new parent in the Roblox game hierarchy.",
        "modelDescription": "Move a Roblox instance to a new parent. Changes the Parent property of the instance.",
        "canBeReferencedInPrompt": true,
        "inputSchema": {
          "type": "object",
          "properties": {
            "sourcePath": {
              "type": "array",
              "items": { "type": "string" },
              "description": "Path to the instance to move"
            },
            "targetPath": {
              "type": "array",
              "items": { "type": "string" },
              "description": "Path to the new parent instance"
            }
          },
          "required": ["sourcePath", "targetPath"]
        }
      },
      {
        "name": "rbxdev_get_children",
        "toolReferenceName": "roblox-children",
        "displayName": "Get Instance Children",
        "description": "Get the children of an instance in the Roblox game.",
        "modelDescription": "Get the children of a Roblox instance. Used for exploring parts of the game tree that weren't initially loaded.",
        "canBeReferencedInPrompt": true,
        "inputSchema": {
          "type": "object",
          "properties": {
            "path": {
              "type": "array",
              "items": { "type": "string" },
              "description": "Path to the parent instance"
            },
            "format": {
              "type": "string",
              "enum": ["tree", "json"],
              "description": "Output format: 'tree' for human-readable, 'json' for structured data"
            }
          },
          "required": ["path"]
        }
      },
      {
        "name": "rbxdev_get_script_source",
        "toolReferenceName": "roblox-script",
        "displayName": "Get Script Source",
        "description": "Get the decompiled source code of a Script, LocalScript, or ModuleScript in the Roblox game.",
        "modelDescription": "Get the decompiled source code of a script instance. Works with Script, LocalScript, and ModuleScript. Requires the executor to have decompiler support.",
        "canBeReferencedInPrompt": true,
        "inputSchema": {
          "type": "object",
          "properties": {
            "path": {
              "type": "array",
              "items": { "type": "string" },
              "description": "Path to the script instance (e.g., [\"ReplicatedStorage\", \"MyModule\"])"
            }
          },
          "required": ["path"]
        }
      },
      {
        "name": "rbxdev_create_instance",
        "toolReferenceName": "roblox-create",
        "displayName": "Create Roblox Instance",
        "description": "Create a new instance in the Roblox game as a child of the specified parent.",
        "modelDescription": "Create a new Roblox instance. Specify the class name (e.g., 'Part', 'Folder', 'Script'), optional instance name, and the parent path.",
        "canBeReferencedInPrompt": true,
        "inputSchema": {
          "type": "object",
          "properties": {
            "className": {
              "type": "string",
              "description": "The Roblox class name to create (e.g., 'Part', 'Folder', 'Model')"
            },
            "parentPath": {
              "type": "array",
              "items": { "type": "string" },
              "description": "Path to the parent instance (e.g., [\"Workspace\"])"
            },
            "name": {
              "type": "string",
              "description": "Optional name for the new instance"
            }
          },
          "required": ["className", "parentPath"]
        }
      },
      {
        "name": "rbxdev_clone_instance",
        "toolReferenceName": "roblox-clone",
        "displayName": "Clone Roblox Instance",
        "description": "Clone an existing instance in the Roblox game.",
        "modelDescription": "Clone (duplicate) a Roblox instance. The clone will be created as a sibling of the original.",
        "canBeReferencedInPrompt": true,
        "inputSchema": {
          "type": "object",
          "properties": {
            "path": {
              "type": "array",
              "items": { "type": "string" },
              "description": "Path to the instance to clone (e.g., [\"Workspace\", \"Part\"])"
            }
          },
          "required": ["path"]
        }
      },
      {
        "name": "rbxdev_get_remote_calls",
        "toolReferenceName": "roblox-remote-spy",
        "displayName": "Get Remote Spy Calls",
        "description": "Get recently captured remote calls from the Remote Spy feature.",
        "modelDescription": "Get recent FireServer and InvokeServer calls captured by Remote Spy. Requires Remote Spy to be enabled. Returns remote name, path, method, and arguments.",
        "canBeReferencedInPrompt": true,
        "inputSchema": {
          "type": "object",
          "properties": {
            "limit": {
              "type": "number",
              "description": "Maximum number of calls to return (default 50)"
            }
          }
        }
      }
    ],
    "languages": [
      {
        "id": "luau",
        "aliases": ["Luau", "luau"],
        "extensions": [".luau"],
        "configuration": "./language-configuration.json"
      },
      {
        "id": "lua",
        "aliases": ["Lua", "lua"],
        "extensions": [".lua"],
        "configuration": "./language-configuration.json"
      }
    ],
    "grammars": [
      {
        "language": "luau",
        "scopeName": "source.luau",
        "path": "./syntaxes/luau.tmLanguage.json"
      },
      {
        "language": "lua",
        "scopeName": "source.luau",
        "path": "./syntaxes/luau.tmLanguage.json"
      }
    ],
    "configuration": {
      "title": "Roblox Luau Language Server",
      "properties": {
        "rbxdev-ls.typeCheckMode": {
          "type": "string",
          "default": "strict",
          "enum": ["nocheck", "nonstrict", "strict"],
          "description": "Type checking mode (matches --!strict, --!nonstrict, --!nocheck)"
        },
        "rbxdev-ls.enableSuncApi": {
          "type": "boolean",
          "default": true,
          "description": "Enable Sunc executor API completions and type checking"
        },
        "rbxdev-ls.executorBridge.port": {
          "type": "number",
          "default": 21324,
          "description": "WebSocket port for executor bridge connections"
        },
        "rbxdev-ls.mcp.enabled": {
          "type": "boolean",
          "default": true,
          "description": "Enable MCP server for AI assistants (GitHub Copilot, Claude, etc.)"
        }
      }
    },
    "viewsContainers": {
      "activitybar": [
        {
          "id": "rbxdev-explorer",
          "title": "Roblox Explorer",
          "icon": "icon.png"
        }
      ]
    },
    "views": {
      "rbxdev-explorer": [
        {
          "id": "rbxdev-gameTree",
          "name": "Game Tree"
        },
        {
          "id": "rbxdev-properties",
          "name": "Properties",
          "type": "webview"
        }
      ]
    },
    "commands": [
      {
        "command": "rbxdev-ls.execute",
        "title": "Execute in Roblox",
        "icon": "$(play)"
      },
      {
        "command": "rbxdev-ls.executeSelection",
        "title": "Execute Selection in Roblox",
        "icon": "$(play)"
      },
      {
        "command": "rbxdev-ls.toggleBridge",
        "title": "Toggle Executor Bridge"
      },
      {
        "command": "rbxdev-ls.copyPath",
        "title": "Copy Instance Path"
      },
      {
        "command": "rbxdev-ls.insertPath",
        "title": "Insert Path at Cursor"
      },
      {
        "command": "rbxdev-ls.insertService",
        "title": "Insert GetService Statement"
      },
      {
        "command": "rbxdev-ls.refreshGameTree",
        "title": "Refresh Game Tree",
        "icon": "$(refresh)"
      },
      {
        "command": "rbxdev-ls.editProperty",
        "title": "Edit Value",
        "icon": "$(edit)"
      },
      {
        "command": "rbxdev-ls.teleportTo",
        "title": "Teleport To",
        "icon": "$(location)"
      },
      {
        "command": "rbxdev-ls.deleteInstance",
        "title": "Delete Instance",
        "icon": "$(trash)"
      },
      {
        "command": "rbxdev-ls.setupMcp",
        "title": "Roblox: Setup MCP Server for Copilot"
      },
      {
        "command": "rbxdev-ls.viewScript",
        "title": "View Script Source",
        "icon": "$(file-code)"
      },
      {
        "command": "rbxdev-ls.createInstance",
        "title": "Create Instance",
        "icon": "$(add)"
      },
      {
        "command": "rbxdev-ls.cloneInstance",
        "title": "Clone Instance",
        "icon": "$(copy)"
      },
      {
        "command": "rbxdev-ls.searchGameTree",
        "title": "Search Game Tree",
        "icon": "$(search)"
      },
      {
        "command": "rbxdev-ls.clearGameTreeSearch",
        "title": "Clear Search",
        "icon": "$(close)"
      },
      {
        "command": "rbxdev-ls.toggleRemoteSpy",
        "title": "Toggle Remote Spy",
        "icon": "$(eye)"
      },
      {
        "command": "rbxdev-ls.setRemoteSpyFilter",
        "title": "Set Remote Spy Filter",
        "icon": "$(filter)"
      },
      {
        "command": "rbxdev-ls.clearRemoteSpyOutput",
        "title": "Clear Remote Spy Output",
        "icon": "$(clear-all)"
      },
      {
        "command": "rbxdev-ls.showRemoteSpy",
        "title": "Show Remote Spy Output",
        "icon": "$(output)"
      },
      {
        "command": "rbxdev-ls.copyLastRemoteCall",
        "title": "Copy Remote Call to Clipboard",
        "icon": "$(copy)"
      },
      {
        "command": "rbxdev-ls.insertLastRemoteCall",
        "title": "Insert Remote Call at Cursor",
        "icon": "$(insert)"
      },
      {
        "command": "rbxdev-ls.copyQuickRemote",
        "title": "Quick Copy Last Remote Call",
        "icon": "$(clippy)"
      }
    ],
    "keybindings": [
      {
        "command": "rbxdev-ls.execute",
        "key": "ctrl+shift+e",
        "when": "editorLangId == lua || editorLangId == luau"
      },
      {
        "command": "rbxdev-ls.executeSelection",
        "key": "ctrl+shift+alt+e",
        "when": "editorLangId == lua || editorLangId == luau && editorHasSelection"
      },
      {
        "command": "rbxdev-ls.copyLastRemoteCall",
        "key": "ctrl+shift+r",
        "when": "editorLangId == lua || editorLangId == luau"
      },
      {
        "command": "rbxdev-ls.insertLastRemoteCall",
        "key": "ctrl+shift+alt+r",
        "when": "editorLangId == lua || editorLangId == luau"
      },
      {
        "command": "rbxdev-ls.copyQuickRemote",
        "key": "ctrl+alt+c",
        "when": "editorLangId == lua || editorLangId == luau"
      }
    ],
    "menus": {
      "editor/title/run": [
        {
          "command": "rbxdev-ls.execute",
          "when": "editorLangId == lua || editorLangId == luau",
          "group": "navigation@1"
        }
      ],
      "editor/title": [
        {
          "command": "rbxdev-ls.execute",
          "when": "editorLangId == lua || editorLangId == luau",
          "group": "navigation"
        }
      ],
      "editor/context": [
        {
          "command": "rbxdev-ls.executeSelection",
          "when": "editorLangId == lua || editorLangId == luau && editorHasSelection",
          "group": "1_modification"
        }
      ],
      "view/title": [
        {
          "command": "rbxdev-ls.searchGameTree",
          "when": "view == rbxdev-gameTree",
          "group": "navigation@1"
        },
        {
          "command": "rbxdev-ls.clearGameTreeSearch",
          "when": "view == rbxdev-gameTree && rbxdev-ls:searchActive",
          "group": "navigation@2"
        },
        {
          "command": "rbxdev-ls.refreshGameTree",
          "when": "view == rbxdev-gameTree",
          "group": "navigation@3"
        }
      ],
      "view/item/context": [
        {
          "command": "rbxdev-ls.copyPath",
          "when": "view == rbxdev-gameTree",
          "group": "navigation@1"
        },
        {
          "command": "rbxdev-ls.insertPath",
          "when": "view == rbxdev-gameTree",
          "group": "navigation@2"
        },
        {
          "command": "rbxdev-ls.insertService",
          "when": "view == rbxdev-gameTree && viewItem == service",
          "group": "navigation@3"
        },
        {
          "command": "rbxdev-ls.teleportTo",
          "when": "view == rbxdev-gameTree",
          "group": "2_actions@1"
        },
        {
          "command": "rbxdev-ls.deleteInstance",
          "when": "view == rbxdev-gameTree && viewItem != service",
          "group": "2_actions@2"
        },
        {
          "command": "rbxdev-ls.viewScript",
          "when": "view == rbxdev-gameTree && viewItem =~ /script/",
          "group": "navigation@4"
        },
        {
          "command": "rbxdev-ls.createInstance",
          "when": "view == rbxdev-gameTree",
          "group": "3_create@1"
        },
        {
          "command": "rbxdev-ls.cloneInstance",
          "when": "view == rbxdev-gameTree && viewItem != service",
          "group": "3_create@2"
        }
      ]
    }
  },
  "scripts": {
    "vscode:prepublish": "bun run build-all",
    "build-all": "cd .. && bun run build:all && cd vscode && tsc -p ./ && bun run copy-server",
    "copy-server": "bun ./scripts/copy-server.ts",
    "compile": "tsc -p ./",
    "watch": "tsc -watch -p ./",
    "package": "vsce package"
  },
  "dependencies": {
    "vscode-languageclient": "^9.0.1"
  },
  "devDependencies": {
    "@types/vscode": "^1.75.0",
    "@types/node": "^20.0.0",
    "typescript": "^5.0.0",
    "@vscode/vsce": "^2.0.0"
  }
}
